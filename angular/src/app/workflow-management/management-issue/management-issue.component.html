<div [@routerTransition]>
    <div class="kt-subheader kt-grid__item">
        <div class="kt-subheader__main">
            <h3 class="kt-subheader__title">
                <a [routerLink]="['/app/project/manager-project',issue.project_Id]"> <span>{{issue.projectCode}}</span></a>
            </h3>
            <span class="kt-subheader__separator kt-subheader__separator--v"></span>
            <span class="kt-subheader__desc">
                {{issue.issueCode}}
                <br>
                {{issue.summary}}
            </span>
        </div>
    </div>
    <div class="kt-content">
        <div class="kt-portlet kt-portlet--mobile">
            <div class="kt-portlet__body">
                <form class="kt-form" autocomplete="new-password">
                    <div>

                        <div class="row mb-4">
                            <div class="col-md-10">
                                <button (click)="editIssue(idIssue)" *ngIf="isGranted('Pages.Administration.Users.Create')"
                                    class="btn btn-primary" style="margin-right:
                                    5px;"><i class="fa fa-plus"></i> {{"Edit" |
                                    localize}}</button>
                                <!-- <button (click)="createNew()" *ngIf="isGranted('Pages.Administration.Users.Create')"
                                    class="btn btn-primary" style="margin-right:
                                    5px;"><i class="fa fa-plus"></i> {{"Comment"
                                    | localize}}</button> -->
                                <button (click)="startProgress(idIssue)" *ngIf="isGranted('Pages.Administration.Users.Create')"
                                    class="btn btn-primary" style="margin-right:
                                    5px;"><i class="fa fa-plus"></i>
                                    {{"StartProgress" | localize}}</button>
                                <button (click)="stopProgress(idIssue)" *ngIf="isGranted('Pages.Administration.Users.Create')"
                                    class="btn btn-primary" style="margin-right:
                                    5px;"><i class="fa fa-plus"></i>
                                    {{"StopProgress" | localize}}</button>
                                <button (click)="resolved(idIssue)" *ngIf="isGranted('Pages.Administration.Users.Create')"
                                    class="btn btn-primary" style="margin-right:
                                    5px;"><i class="fa fa-plus"></i>
                                    {{"ResolveIssue" | localize}}</button>
                                    <button (click)="reOpen(idIssue)" *ngIf="isGranted('Pages.Administration.Users.Create')"
                                    class="btn btn-primary" style="margin-right:
                                    5px;"><i class="fa fa-plus"></i>
                                    {{"ReOpen" | localize}}</button>
                                    <button (click)="close(idIssue)" *ngIf="isGranted('Pages.Administration.Users.Create')"
                                    class="btn btn-primary" style="margin-right:
                                    5px;"><i class="fa fa-plus"></i>
                                    {{"Close" | localize}}</button>
                                <!-- <button (click)="createNew()" *ngIf="isGranted('Pages.Administration.Users.Create')" class="btn btn-primary" style="float: right;margin-right: 5px;"><i class="fa fa-plus"></i> {{"ResolveIssue" | localize}}</button> -->
                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn btn-success" style="float: right;"
                                    (click)="exportExcel()"> <i class="far
                                        fa-file-excel"></i> {{"Export" |
                                    localize}}</button>
                            </div>
                        </div>
                    </div>
                </form>


                <div class="container-full">
                    <div class="row">
                        <div class="col-md-8">
                            <fieldset class="scheduler-border">
                                <legend class="scheduler-border">{{"Details" |
                                    localize}}</legend>
                                <div class="row">
                                    <div class="col-md-2">
                                        Type:
                                    </div>
                                    <div class="col-md-4">
                                        {{issue.type}}
                                    </div>
                                    <div class="col-md-2">
                                        Status:
                                    </div>
                                    <div class="col-md-4">
                                        {{issue.status}}
                                    </div>
                                    <div class="col-md-2">
                                        Priority:
                                    </div>
                                    <div class="col-md-4">
                                        {{issue.priority}}
                                    </div>
                                    <div class="col-md-2">
                                        Resolution:
                                    </div>
                                    <div class="col-md-4">
                                        {{issue.resolve}}
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="scheduler-border">
                                <legend class="scheduler-border">{{"Discription" | localize}}</legend>
                                <p>{{issue.discription}}</p>
                                <!-- <textarea rows="5" cols="30" pInputTextarea name="Discription"  class="form-control" [(ngModel)]="issue" maxlength="2000"></textarea> -->
                            </fieldset>
                        </div>
                        <div class="col-md-4">
                            <fieldset class="scheduler-border">
                                <legend class="scheduler-border">{{"People" | localize}}</legend>
                                <div class="row">
                                    <div class="col-md-5">
                                        Assignee:
                                    </div>
                                    <div class="col-md-7">
                                        {{assignee}}
                                    </div>
                                    <div class="col-md-5">
                                        Reporter:
                                    </div>
                                    <div class="col-md-7">
                                        {{reporter}}
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset class="scheduler-border">
                                <legend class="scheduler-border">{{"Date" | localize}}</legend>
                                <div class="row">
                                    <div class="col-md-5">
                                        Due:
                                    </div>
                                    <div class="col-md-7">
                                        {{dueDate | momentFormat:'L'}}
                                    </div>
                                    <div class="col-md-5">
                                        Created:
                                    </div>
                                    <div class="col-md-7">
                                        {{createdDate| momentFormat:'LLL'}}
                                    </div>
                                    <div class="col-md-5">
                                        Update:
                                    </div>
                                    <div class="col-md-7">
                                        {{updateDate| momentFormat:'LLL'}}
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="col-md-12">
                            <fieldset class="scheduler-border">
                                <legend class="scheduler-border">{{"Actions" | localize}}</legend>
                                <tabset class="tab-container">
                                    <tab heading="{{'Comment' | localize}}" [active]="true">
                                        <app-comments [IssueId] = "issue.id"></app-comments>
                                    </tab>
                                    <tab heading="{{'History' | localize}}">
                                        History
                                    </tab>
                                </tabset>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <app-create-issue #createOrEditModal (modalSave)="ngOnInit()"></app-create-issue>
</div>